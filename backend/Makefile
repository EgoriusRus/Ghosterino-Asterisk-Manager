.PHONY: help build run seed generator clean docker-up docker-down

help: ## –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-15s\033[0m %s\n", $$1, $$2}'

build: ## –°–æ–±—Ä–∞—Ç—å API —Å–µ—Ä–≤–µ—Ä
	@echo "üî® Building API server..."
	@go build -o bin/api main.go routes.go

run: build ## –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä
	@echo "üöÄ Starting API server..."
	@./bin/api

seed: ## –ó–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
	@echo "üå± Seeding database..."
	@go run cmd/seed/main.go

generator: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ñ–∏–≥–æ–≤
	@echo "‚öôÔ∏è  Running generator..."
	@go run cmd/generator/main.go

clean: ## –û—á–∏—Å—Ç–∏—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
	@echo "üóëÔ∏è  Cleaning..."
	@rm -rf bin/
	@rm -rf results/

docker-up: ## –ü–æ–¥–Ω—è—Ç—å Docker Compose
	@echo "üê≥ Starting Docker Compose..."
	@cd .. && docker-compose up -d

docker-down: ## –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker Compose
	@echo "üê≥ Stopping Docker Compose..."
	@cd .. && docker-compose down

docker-logs: ## –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ Docker
	@cd .. && docker-compose logs -f

test: ## –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
	@echo "üß™ Running tests..."
	@go test -v ./...

.DEFAULT_GOAL := help
